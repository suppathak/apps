
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>ArgoCD onboarding procedure &#8212; GitOps Docs</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Secret management for applications" href="secret_management.html" />
    <link rel="prev" title="Import Development GPG Key" href="import_dev_gpg.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/icon.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">GitOps Docs</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../README.html">
                    GitOps Documentation
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  GitOps
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../about/README.html">
   About
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../about/intro.html">
     Getting started with Operate First
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../acm/README.html">
   ACM
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../acm/adding_managed_cluster_to_argocd.html">
     Adding Managed Cluster to ArgoCD
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../acm/adding_managed_cluster_to_identitatem.html">
     Adding Managed Cluster to Identitatem
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../acm/manage_your_teams_ocp_clusters_via_acm.html">
     Managing your teamâ€™s ocp clusters via ACM
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../acme/README.html">
   ACME
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../acme/issuing_certificates.html">
     Issuing certificates
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="README.html">
   ArgoCD
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="add_application.html">
     Adding ArgoCD Applications
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="add_permissions_to_project.html">
     Requesting more permissions for an ArgoCD Project (MOC)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="encrypting_applications.html">
     How to encrypt apps in this repo
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="get_access_to_argocd.html">
     Get access to ArgoCD
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="import_dev_gpg.html">
     Import Development GPG Key
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     ArgoCD onboarding procedure
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="secret_management.html">
     Secret management for applications
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="setup_argocd_dev_environment.html">
     Deploying a development environment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="update_argocd.html">
     Steps for Upgrading ArgoCD
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="update_gpg_key.html">
     Update gpg key
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="argocd_notifications.html">
     Where and How do I add notifications to my ArgoCD apps?
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../vault_eso/README.html">
   Secret Management
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../vault_eso/add_cluster_to_eso_and_vault.html">
     Enable Cluster to use External Secrets with Vault
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vault_eso/add_external_secrets_to_ns.html">
     Add External Secrets to a namespace
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vault_eso/add_eso_to_cluster.html">
     Add External Secrets Operator to an OPF cluster
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vault_eso/restore_vault.html">
     Restoring vault
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vault_eso/vault_backup_job.html">
     Vault Backup Job
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../vault_eso/runbook.html">
     Vault Runbook
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../cluster-scope/README.html">
   Cluster Management
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../cluster-scope/add_resource_quotas.html">
     Adding Resource Quotas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cluster-scope/create_ocp_group.html">
     Adding an OCP group to Operate First Cloud
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cluster-scope/add_user_to_group.html">
     Adding User to an OCP team
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cluster-scope/offboarding_cluster.html">
     Remove a Cluster from Operate First
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cluster-scope/onboarding_project.html">
     Onboard Project
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../cluster-scope/quotas.html">
     Resource Quota Tiers
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../cluster-scope/runbooks/runbook.html">
     Runbooks
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../cluster-scope/runbooks/emea/runbook.html">
       EMEA clusters
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../cluster-scope/runbooks/moc/runbook.html">
       MOC Clusters
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../development/README.html">
   Development
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../development/crc-disk-size.html">
     Increasing CRC disk space
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../development/setup_quicklab.html">
     Quicklab
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../kafka/README.html">
   Kafka
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../kafka/add_kafka_topics.html">
     Add Kafka Topics
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../kafka/add_kafka_users.html">
     Add Kafka Users
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../kafka/runbook.html">
     Kafka Runbook
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../grafana/README.html">
   Grafana
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../grafana/add_grafana_dashboard.html">
     Add a Grafana dashboard to OperateFirst Grafana
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../grafana/map_groups_to_roles.html">
     Adding permissions in Grafana
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../prometheus/README.html">
   Prometheus
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../observatorium/README.html">
   Observatorium
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../observatorium/loki/README.html">
     Loki
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../observatorium/thanos/README.html">
     Thanos Access
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../observatorium/thanos/request_grafana_access.html">
     Grafana
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../observatorium/thanos/request_thanos_access.html">
     Thanos Query API
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../observatorium/thanos/thanos_programmatic_access.html">
     Thanos Programmatic Access
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../observatorium/vector/README.html">
     Vector on Operate First
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ocs/README.html">
   OpenShift Container Storage
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ocs/buckets-external-access.html">
     Accessing buckets from outside the cluster
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ocs/claiming_object_store.html">
     Claiming S3-compatible object store buckets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ocs/runbook.html">
     OpenShift Container Storage (OCS) Runbook
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../odh/README.html">
   Open Data Hub (ODH)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../odh/jupyterhub/README.html">
     JupyterHub
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
    <label for="toctree-checkbox-14">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../odh/jupyterhub/access_jupyterhub.html">
       Access JupyterHub
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../odh/jupyterhub/add_imagestream_to_jh.html">
       Provision a new ImageStream
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../odh/jupyterhub/analyze_storage.html">
       Analyze Storage for a Notebook
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../odh/jupyterhub/increase_pvc_size_jh.html">
       Increase PVC size for JupyterHub
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../odh/jupyterhub/reinstall_kernel.html">
       How to restart a Notebook Kernel
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../odh/jupyterhub/runbook.html">
       JupyterHub Runbook
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../odh/jupyterhub/user_profiles.html">
       Managing user profiles
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../odh/superset/README.html">
     Superset
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
    <label for="toctree-checkbox-15">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../odh/superset/add_superset_users.html">
       Provision Superset Access
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../odh/superset/add_trino_db.html">
       Add Trino database
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../odh/superset/map_groups_to_roles.html">
       Map OCP Group to Superset Role
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../odh/superset/runbook.html">
       Superset Runbook
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../odh/trino/README.html">
     Trino
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
    <label for="toctree-checkbox-16">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../odh/trino/access_public_bucket.html">
       Operate-First Public Bucket
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../odh/trino/add_more_buckets.html">
       Adding buckets to Trino
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../odh/trino/add_more_postgress_catalogs.html">
       Adding additional Postgres catalogs to Trino
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../odh/trino/trino_superset_user_guide.html">
       How To Guide: Ceph -&gt; Trino -&gt; Superset
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../odh/adding_kfdefs.html">
     Add a new Kfdef
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../openmetadata/README.html">
   OpenMetaData
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
  <label for="toctree-checkbox-17">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../openmetadata/operator_manual/deployment.html">
     OpenMetaData Deployment on Operate First
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../openmetadata/operator_manual/updating_om.html">
     Updating OpenMetaData
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../reloader/README.html">
   Reloader
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
  <label for="toctree-checkbox-18">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../reloader/monitoring-secrets-configmaps.html">
     Monitoring secrets and configMaps for changes with Reloader
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../uwm/README.html">
   User WorkLoad Monitoring
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
  <label for="toctree-checkbox-19">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../uwm/overview.html">
     Overview
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../volsync/README.html">
   Volsync
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/>
  <label for="toctree-checkbox-20">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../volsync/using-volsync.html">
     Using Volsync to back up persistent volumes
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../opentelemetry-collector/README.html">
   OpenTelemetry Collector
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/>
  <label for="toctree-checkbox-21">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../opentelemetry-collector/using-opentelemetry-collector.html">
     Collecting OpenTelemetry data
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../jaeger/README.html">
   Jaeger
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/>
  <label for="toctree-checkbox-22">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../jaeger/using-distributed-tracing-jaeger.html">
     Jaeger for visualizing traces
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../notebooks/README.html">
   Notebooks
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/>
  <label for="toctree-checkbox-23">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/increase_pvc_size.html">
     Increase size of a PVC in JupyterHub
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/onboarding_new_cluster.html">
     How to add a new cluster to Operate First
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../notebooks/onboarding_project.html">
     How to onboard a new project to a cluster on Operate First Cloud
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../templates/README.html">
   Templates
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/>
  <label for="toctree-checkbox-24">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../templates/runbook.html">
     &lt;Application/Service Name&gt; Runbook
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../CONTRIBUTING.html">
   Contributing to GitOps Docs
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/operate-first/apps"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/operate-first/apps/issues/new?title=Issue%20on%20page%20%2Fcontent/argocd-gitops/onboarding_to_argocd.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../../_sources/content/argocd-gitops/onboarding_to_argocd.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pre-requisites">
   Pre-requisites
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#openshift-group">
   OpenShift Group
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-project-directories-for-this-repository">
   Create project directories for this repository
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-the-argocd-project">
   Create the ArgoCD Project
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#enable-openshift-auth-to-argocd-console">
   Enable OpenShift auth to ArgoCD Console
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#give-team-read-access-to-non-app-argocd-resources">
   Give team read access to non-app ArgoCD resources
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#additional-notes">
   Additional Notes:
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#namespace-prefix">
     Namespace Prefix
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#resources">
     Resources:
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>ArgoCD onboarding procedure</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pre-requisites">
   Pre-requisites
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#openshift-group">
   OpenShift Group
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-project-directories-for-this-repository">
   Create project directories for this repository
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#create-the-argocd-project">
   Create the ArgoCD Project
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#enable-openshift-auth-to-argocd-console">
   Enable OpenShift auth to ArgoCD Console
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#give-team-read-access-to-non-app-argocd-resources">
   Give team read access to non-app ArgoCD resources
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#additional-notes">
   Additional Notes:
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#namespace-prefix">
     Namespace Prefix
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#resources">
     Resources:
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="argocd-onboarding-procedure">
<h1>ArgoCD onboarding procedure<a class="headerlink" href="#argocd-onboarding-procedure" title="Permalink to this headline">#</a></h1>
<p>We have an ArgoCD instance deployed on MOC that can be used to deploy OpenShift resources located on a Git Repository.</p>
<p>The ArgoCD instance is deployed on <a class="reference external" href="https://github.com/operate-first/apps/tree/master/argocd/overlays/moc-infra">MOC Infra</a> cluster.</p>
<p>Each team is given an <a class="reference external" href="https://argoproj.github.io/argo-cd/user-guide/projects/">ArgoCD Project</a> that has an allow-list of clusters and namespaces to which they can deploy.
They also have an allow-list of resources they can deploy within those namespaces. These restrictions exist to prevent
teams from being able to use ArgoCD to deploy cluster scoped resources, or resources onto other teamâ€™s namespaces. You
can browse the projects <a class="reference external" href="https://github.com/operate-first/apps/tree/master/argocd/overlays/moc-infra/projects">here</a> to get an idea of the current set of permissions. Note that for most projects,
majority of these permissions are inherited from the <a class="reference external" href="https://github.com/operate-first/apps/blob/master/argocd/overlays/moc-infra/projects/global_project.yaml">global project</a>.</p>
<p>Teams are given edit access (for ui/cli console) to their ArgoCD Projects using OpenShift RBAC and OpenShift Groups.</p>
<p>The following steps should be completed to fully onboard and enable a team to use ArgoCD to deploy <code class="docutils literal notranslate"><span class="pre">Applications</span></code> to
their ArgoCD <code class="docutils literal notranslate"><span class="pre">Projects</span></code>.</p>
<blockquote>
<div><p>Note: ArgoCD Projects should not to be confused with OpenShift Projects.</p>
</div></blockquote>
<section id="pre-requisites">
<h2>Pre-requisites<a class="headerlink" href="#pre-requisites" title="Permalink to this headline">#</a></h2>
<p>Team requesting ArgoCD access must have been onboarded to the cluster. See <span class="xref myst">here</span>.</p>
<p>Please fork/clone the <a class="reference external" href="https://github.com/operate-first/apps">operate-first/apps</a>.</p>
<p><strong>During this whole setup, weâ€™ll be working within this repository.</strong></p>
</section>
<section id="openshift-group">
<h2>OpenShift Group<a class="headerlink" href="#openshift-group" title="Permalink to this headline">#</a></h2>
<p>To add multi-tenancy support, we require the team to have an OpenShift group on the Infra cluster on which our ArgoCD
instance resides. This OpenShift group should include all the people belonging to the team that will need write-level
access to applications belonging to the teamâ€™s ArgoCD Project (explained later). Existing OCP groups and their
membership can be found <a class="reference external" href="https://github.com/operate-first/apps/tree/master/cluster-scope/base/user.openshift.io/groups">here</a>. If you do not have a group to which you belong, you can create a new one and add
yourself and associated members by following the instructions <a class="reference internal" href="../cluster-scope/create_ocp_group.html"><span class="doc std std-doc">here</span></a>.</p>
<blockquote>
<div><p>Note: We use teams/project names interchangeably throughout this doc as all ArgoCD projects (for end-users) are named
after their team names picked during the cluster onboarding process.</p>
</div></blockquote>
</section>
<section id="create-project-directories-for-this-repository">
<h2>Create project directories for this repository<a class="headerlink" href="#create-project-directories-for-this-repository" title="Permalink to this headline">#</a></h2>
<p>Pick an environment/cluster this team will be deploying to. Navigate to
<code class="docutils literal notranslate"><span class="pre">apps/argocd/overlays/moc-infra/applications/envs/&lt;env&gt;/&lt;cluster&gt;/</span></code>, where <code class="docutils literal notranslate"><span class="pre">&lt;env&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;cluster&gt;</span></code> correspond to the
cluster you intend to deploy manifests to via ArgoCD. For example if deploying to <code class="docutils literal notranslate"><span class="pre">Smaug</span></code> cluster, you will navigate to
<code class="docutils literal notranslate"><span class="pre">apps/argocd/overlays/moc-infra/applications/envs/moc/smaug/</span></code>. Now create a folder here named after your <code class="docutils literal notranslate"><span class="pre">&lt;team-name&gt;</span></code>.</p>
<p>Teams should be directed <a class="reference internal" href="add_application.html"><span class="doc std std-doc">here</span></a> for instructions on where to create their ArgoCD Applications. All Applications
should be pointed to the teamâ€™s <a class="reference external" href="https://github.com/operate-first/apps/tree/master/argocd/overlays/moc-infra/projects">ArgoCD Project</a> (i.e. the <code class="docutils literal notranslate"><span class="pre">project</span></code> field in the ArgoCD <a class="reference external" href="https://argoproj.github.io/argo-cd/operator-manual/declarative-setup/#applications">Application</a> manifest),
see below for instructions on adding an ArgoCD Project.</p>
</section>
<section id="create-the-argocd-project">
<h2>Create the ArgoCD Project<a class="headerlink" href="#create-the-argocd-project" title="Permalink to this headline">#</a></h2>
<p>The team will need a dedicated <a class="reference external" href="https://argoproj.github.io/argo-cd/user-guide/projects/">ArgoCD Project</a> for their <a class="reference external" href="https://argoproj.github.io/argo-cd/operator-manual/declarative-setup/#applications">ArgoCD Applications</a>. The ArgoCD project should be
added <a class="reference external" href="https://github.com/operate-first/apps/tree/master/argocd/overlays/moc-infra/projects">here</a>.</p>
<p>A typical project will look like the following:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span><span class="w"></span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AppProject</span><span class="w"></span>
<span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;team-name&gt;</span><span class="w"></span>
<span class="w">  </span><span class="nt">labels</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">project-template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">global</span><span class="w"></span>
<span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">destinations</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&lt;team-namespace-prefix&gt;-*&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&lt;cluster-name&gt;&#39;</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&lt;namespace-name&gt;&#39;</span><span class="w"> </span><span class="c1"># if there is no generic team name prefix, then specify namespaces individually</span><span class="w"></span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&lt;cluster-name&gt;&#39;</span><span class="w"></span>
<span class="w">  </span><span class="nt">sourceRepos</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;*&#39;</span><span class="w"></span>
<span class="w">  </span><span class="nt">roles</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">project-admin</span><span class="w"></span>
<span class="w">      </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Read/Write access to this project only</span><span class="w"></span>
<span class="w">      </span><span class="nt">policies</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">p, proj:&lt;team-name&gt;:project-admin, applications, get, &lt;team-name&gt;/*, allow</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">p, proj:&lt;team-name&gt;:project-admin, applications, create, &lt;team-name&gt;/*, allow</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">p, proj:&lt;team-name&gt;:project-admin, applications, update, &lt;team-name&gt;/*, allow</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">p, proj:&lt;team-name&gt;:project-admin, applications, delete, &lt;team-name&gt;/*, allow</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">p, proj:&lt;team-name&gt;:project-admin, applications, sync, &lt;team-name&gt;/*, allow</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">p, proj:&lt;team-name&gt;:project-admin, applications, override, &lt;team-name&gt;/*, allow</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">p, proj:&lt;team-name&gt;:project-admin, applications, action/*, &lt;team-name&gt;/*, allow</span><span class="w"></span>
<span class="w">      </span><span class="nt">groups</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;team-openshift-group&gt;</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">operate-first</span><span class="w"></span>
<span class="w">  </span><span class="nt">clusterResourceWhitelist</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Namespace</span><span class="w"></span>
<span class="w">  </span><span class="nt">namespaceResourceWhitelist</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">....</span><span class="w"></span>
</pre></div>
</div>
<p>Some notes:</p>
<ul class="simple">
<li><p>Ensure that the <code class="docutils literal notranslate"><span class="pre">spec.destinations</span></code> field contains a prefix for the teamâ€™s namespaces. The team will be required to
prefix their namespaces with this attribute if they want ArgoCD to be able to deploy to them, any other namespaces not
following the prefix will need to be added manually under this field. See additional notes for more details.</p></li>
<li><p>Ensure <code class="docutils literal notranslate"><span class="pre">operate-first</span></code> is added into the <code class="docutils literal notranslate"><span class="pre">roles.groups</span></code> for each role. This allows the operate-first team to help
diagnose issues.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">namespaceResourceWhitelist</span></code> generally contains the list of resources a project <code class="docutils literal notranslate"><span class="pre">admin</span></code> has access to. In most cases
the <code class="docutils literal notranslate"><span class="pre">namespaceResourceWhitelist</span></code> inherited from the <a class="reference external" href="https://github.com/operate-first/apps/blob/master/argocd/overlays/moc-infra/projects/global_project.yaml">global project</a> should be sufficient. However, teams can add
additional resources here if they are not covered by the global project.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;cluster-name&gt;</span></code> should be one of <code class="docutils literal notranslate"><span class="pre">smaug,</span> <span class="pre">infra,</span> <span class="pre">balrog,</span> <span class="pre">curator,</span> <span class="pre">osc-cl1</span></code> (see <code class="docutils literal notranslate"><span class="pre">metadata.name</span></code> <a class="reference external" href="https://github.com/operate-first/apps/tree/master/cluster-scope/base/user.openshift.io/groups">here</a> for a
full list).</p></li>
</ul>
<p>Ensure that the ArgoCD project is included in the <code class="docutils literal notranslate"><span class="pre">kustomization.yaml</span></code> <a class="reference external" href="https://github.com/operate-first/apps/blob/master/argocd/overlays/moc-infra/projects/kustomization.yaml">here</a>.</p>
</section>
<section id="enable-openshift-auth-to-argocd-console">
<h2>Enable OpenShift auth to ArgoCD Console<a class="headerlink" href="#enable-openshift-auth-to-argocd-console" title="Permalink to this headline">#</a></h2>
<p>By default, all users should be able to see the <a class="reference external" href="https://argocd.operate-first.cloud">ArgoCD console</a>. To be able to make changes to applications
belonging to the teamâ€™s ArgoCD Project (via the cli or ui), the team will need to be able to log into the console with
appropriate access. This is accomplished by adding the teamâ€™s OpenShift group mentioned in the beginning under the dex
config <a class="reference external" href="https://github.com/operate-first/apps/blob/master/argocd/overlays/moc-infra/configs/argo_cm/dex.config#L11">here</a>. You can find your OpenShift group within this list <a class="reference external" href="https://github.com/operate-first/apps/tree/master/cluster-scope/base/user.openshift.io/groups">here</a>.</p>
</section>
<section id="give-team-read-access-to-non-app-argocd-resources">
<h2>Give team read access to non-app ArgoCD resources<a class="headerlink" href="#give-team-read-access-to-non-app-argocd-resources" title="Permalink to this headline">#</a></h2>
<p>Append this <a class="reference external" href="https://github.com/operate-first/apps/blob/master/argocd/overlays/moc-infra/configs/argo_rbac_cm/policy.csv">list</a> and give the team the <code class="docutils literal notranslate"><span class="pre">standard-user</span></code> role. The group will correspond to the teamâ€™s OCP group.
For example if onboarding the team <code class="docutils literal notranslate"><span class="pre">someteam</span></code> you would append the following to this file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">g, someteam, role:standard-user</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="additional-notes">
<h2>Additional Notes:<a class="headerlink" href="#additional-notes" title="Permalink to this headline">#</a></h2>
<section id="namespace-prefix">
<h3>Namespace Prefix<a class="headerlink" href="#namespace-prefix" title="Permalink to this headline">#</a></h3>
<p>An ArgoCD project allows us to ensure that a team cannot deploy applications onto another teamâ€™s namespace via ArgoCD.</p>
<p>We accomplish this by allowing teams to add the namespaces that they will be deploying to in their ArgoCD Project CR
under the <code class="docutils literal notranslate"><span class="pre">spec.destinations.</span></code> field. Example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span><span class="w"></span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AppProject</span><span class="w"></span>
<span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example-project</span><span class="w"></span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argocd</span><span class="w"></span>
<span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">destinations</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">guestbook</span><span class="w"></span>
<span class="w">    </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://kubernetes.default.svc&#39;</span><span class="w"></span>
<span class="nn">...</span><span class="w"></span>
</pre></div>
</div>
<p>The project above can only deploy into the <code class="docutils literal notranslate"><span class="pre">guestbook</span></code> namespace in the host cluster.</p>
<p>It can get bit tedious having to always require a team to submit a pr updating the <code class="docutils literal notranslate"><span class="pre">spec.destinations</span></code> to include new
namespaces their project applications can deploy onto, so we can use wildcards to include a set of namespaces that begin
with a prefix. For example, the <code class="docutils literal notranslate"><span class="pre">thoth</span></code> team has the following prefix in their <code class="docutils literal notranslate"><span class="pre">spec.destinations</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">destinations</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;thoth-*&#39;</span><span class="w"></span>
<span class="w">      </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://kubernetes.default.svc&#39;</span><span class="w"></span>
</pre></div>
</div>
<p>Now, as long as all thoth teamâ€™s namespaces have <code class="docutils literal notranslate"><span class="pre">metadata.name</span></code> beginning with a <code class="docutils literal notranslate"><span class="pre">thoth-</span></code> prefix, they can deploy into
these namespaces using ArgoCD Applications that are part of the <code class="docutils literal notranslate"><span class="pre">thoth</span></code> project.</p>
</section>
<section id="resources">
<h3>Resources:<a class="headerlink" href="#resources" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>To read more about ArgoCD Declarative setup <a class="reference external" href="https://argoproj.github.io/argo-cd/operator-manual/declarative-setup/">see here</a></p></li>
<li><p>To understand our authentication setup <a class="reference external" href="https://argoproj.github.io/argo-cd/operator-manual/user-management/#dex">see here</a></p></li>
<li><p>To read about ArgoCD Projects <a class="reference external" href="https://argoproj.github.io/argo-cd/user-guide/projects/">see here</a></p></li>
<li><p>To learn about Kustomize bases &amp; overlays <a class="reference external" href="https://kubernetes.io/docs/tasks/manage-kubernetes-objects/kustomization/#bases-and-overlays">see here</a></p></li>
</ul>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/argocd-gitops"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="import_dev_gpg.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Import Development GPG Key</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="secret_management.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Secret management for applications</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Operate First Authors<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>